{% extends "watershed_delin/base.html" %}

{% load tethys_gizmos %}

{% load staticfiles %}

{% block styles %}
{{ block.super }}
<link href="{% static 'watershed_delin/css/main.css' %}" rel="stylesheet"/>

{% endblock %}

{% block app_navigation_items %}

{% gizmo select_input select_input %}

{% gizmo text_input txtLocation %}

{% gizmo button btnSearch %}

<div id="search_output"></div>

<hr>

{% gizmo select_input select_navigation %}

<div id="delineation_output"></div>

<div id="up_down_output"></div>

<div id="waiting_output"></div>

<hr>

<a name="btnDownload" class="btn btn-default" id="btnDownload" onclick="run_download_results()">
            <span class="glyphicon hydroshare" aria-hidden="true"></span>
            <img src="/static/watershed_delin/images/download_icon.svg" class="button-icon"/>Download Results
        </a>

<a name="btnUpload" class="btn btn-default" id="btnUpload" data-toggle="modal" data-target="#hydroshare-modal" role="button">
            <span class="glyphicon hydroshare" aria-hidden="true"></span>
            <img src="/static/watershed_delin/images/hydroshare_logo.svg" class="button-icon"/>Upload to HydroShare
        </a>

{% endblock %}

{% block app_content_wrapper_override %}
<!-- Modal  -->
<div class="modal fade" id="welcome-popup" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Welcome to the EPA WATERS Services!</h4>
            </div>
            <div class="modal-body">
                <div id="welcome-info">
                    <ol>
                        <h6><li>Select point of interest</li></h6>
                        <p>Click the map or input the location to identify a watershed outlet and stream reach of interest.</p>
                        <h6><li>Select EPA WATERS Web Service</li></h6>
                        <p>Five choices are listed in the “Select EPA WATERS Service” dropdown list.</p>
                        <ul>
                            <li>Delineate watershed</li>
                            <li>Upstream mainstem</li>
                            <li>Upstream with tributaries</li>
                            <li>Downstream mainstream</li>
                            <li>Downstream with divergences</li>
                        </ul>
                        <p>Once one service is selected, the results will be shown on the map with description shown below the dropdown list.</p>
                        <h6><li>Download Results</li></h6>
                        <p>
                           Click the "Download Results" to download the results as kml files.
                        </p>
                        <h6><li>Upload to HydroShare</li></h6>
                        <p>Click the "Upload to HydroShare" to upload the results to <a href='https://www.hydroshare.org/' target="_blank"> HydroShare</a>.
                             </p>
                        <h9>Note: This app uses the United States <a href='http://water.epa.gov/scitech/datait/tools/waters/services/' target="_blank">
                                EPA WATERS Web and Database Services</a> and only
                            works for watersheds and drainages in the continental United States and Hawaii.
                        </h9>
                    </ol>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" id="close-popup" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal -->
{{block.super}}
{% endblock %}


{% block app_content %}

  <button type="button" class="btn btn-default" data-toggle="modal" data-target="#welcome-popup">Instructions</button>

{% gizmo map_view map_options %}

<!--
<p>Remaining Tasks:</p>
<ol>
    <li>Make sure Tethys is using local ol.js for faster loading</li>
    <li>Create simple tutorial page</li>
    <li>Provide option to store results in HydroShare using Python API</li>
    <li>Provide popup hover info boxes on all features</li>
    <li>On hover on the "Location Search" provide some examples (or default show them in the text box)</li>
    <li>Make a better icon</li>
    <li>Provide copyright and contanct info</li>
    <li>Determine if it is possible to delineate from the location of the measure instead of end of feature.</li>
</ol>
-->

{% endblock %}


{% block scripts %}
<div class="modal fade" id="hydroshare-modal" tabindex="-1" role="dialog" aria-labelledby="AddHydroshareResource">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h6 class="modal-title">Upload File to HydroShare as a Resource(*Required)</h6>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="hydro-username" class="control-label">*Hydroshare Username:</label>
                    <input type="text" class="form-control" id="hydro-username">
                </div>
                <div class="form-group">
                    <label for="hydro-password" class="control-label">*Hydroshare Password:</label>
                    <input type="password" class="form-control" id="hydro-password">
                </div>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" id="credentials-checkbox">Remember me until page refresh (useful if uploading many files)
                    </label>
                </div>
                <div class="form-group">
                    <label for="resource-title" class="control-label">*Resource Title:</label>
                    <input type="text" class="form-control" id="resource-title">
                </div>
                <div class="form-group">
                    <label for="resource-type" class="control-label">*Resource Type:</label>
                    <select class="form-control" id="resource-type">
                        <option>Generic</option>
                        <option>Geographic Raster</option>
                        <option>HIS Referenced Time Series</option>
                        <option>Model Program</option>
                        <option>Model Instance</option>
                        <option>Multidimensional (NetCDF)</option>
                        <option>Time Series</option>
                        <option>Application</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="resource-abstract" class="control-label">*Resource Abstract:</label>
                    <textarea rows="4" cols="50" id="resource-abstract" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label for="resource-keywords" class="control-label">*Resource Keywords:</label>
                    <input type="text" class="form-control" id="resource-keywords">
                </div>
            </div>
            <div class="modal-footer">
                <div id="display-status" class="col-md-8"></div>
                <div id="footer-buttons" class="col-md-4">
                    <button type="button" class="btn btn-default footer" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary footer" id="hydroshare-proceed">Proceed</button>
                </div>
            </div>
        </div>
    </div>
</div>

  {{ block.super }}
  <script src="{% static 'watershed_delin/js/jquery_cookie/jquery.cookie.js' %}"></script>
  <script src="{% static 'watershed_delin/js/map.js' %}"></script>
  <script src="{% static 'watershed_delin/js/WATERSServices-1.0.0-min.js' %}"></script>
  <!--<script src='http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAjpkAC9ePGem0lIq5XcMiuhR_wWLPFku8Ix9i2SXYRVK3e45q1BQUd_beF8dtzKET_EteAjPdGDwqpQ'></script>-->
     <script type="text/javascript"
             src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDPgvDUpbEwcbg9C0cRTfDtDa-Vj4WBwI0">
     </script>
{% endblock %}